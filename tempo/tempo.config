// extra CAS config file to use with Tempo version 1.2-0-g94e134a
// override some settings from the default Tempo juno configs in order to allow for greater resource allocation
// https://www.nextflow.io/docs/latest/config.html?highlight=withname#selectors-priority

process {
    // withName: '.*' {
    //     // change the time limit for all jobs to 72hrs
    //     time = 72.h
    // }
    // grep -E 'process .* {' tempo/pipeline.nf | tr -s ' ' | sed -e 's|^ *||g' | cut -d ' ' -f2 | tr '\n' '|'
    withName: 'SplitLanesR1|SplitLanesR2|AlignReads|MergeBams|MarkDuplicates|CreateRecalibrationTable|RecalibrateBam|CreateScatteredIntervals|RunMutect2|SomaticCombineMutect2Vcf|SomaticDellyCall|SomaticRunManta|SomaticMergeDellyAndManta|SomaticRunStrelka2|SomaticCombineChannel|SomaticAnnotateMaf|RunMutationSignatures|DoFacets|RunPolysolver|RunLOHHLA|SomaticFacetsAnnotation|RunNeoantigen|RunMsiSensor|MetaDataParser|GermlineRunHaplotypecaller|GermlineCombineHaplotypecallerVcf|GermlineRunStrelka2|GermlineCombineChannel|GermlineAnnotateMaf|GermlineFacetsAnnotation|GermlineDellyCall|GermlineRunManta|GermlineMergeDellyAndManta|QcCollectHsMetrics|QcAlfred|QcPileup|QcConpair|QcConpairAll|SomaticAggregateMaf|SomaticAggregateNetMHC|SomaticAggregateFacets|SomaticAggregateSv|SomaticAggregateLOHHLA|SomaticAggregateMetadata|GermlineAggregateMaf|GermlineAggregateSv|QcBamAggregate|QcConpairAggregate' {
        // change the time limit for all jobs to 72hrs
        time = 72.h
    }
    withName: RunMsiSensor {
        // increase the base memory allocation for MSI Sensor
        memory = { 12.GB * task.attempt }
    }
}
